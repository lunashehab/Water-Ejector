<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5129097020907805" crossorigin="anonymous"></script>

    <meta charset="UTF-8" />
    <title>Speaker Cleaner Pro | Ultimate Water & Dust Ejector</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Professional grade audio utility to eject water and dust from phone speakers. 10 specialized cleaning modes.">
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">

    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;500;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #050505;
            --panel: #111111;
            --neon: #39ff14;
            --neon-glow: rgba(57, 255, 20, 0.4);
            --danger: #ff003c;
            --danger-glow: rgba(255, 0, 60, 0.4);
            --text-main: #e0e0e0;
            --border: #333333;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--bg);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            overflow-x: hidden;
        }

        .grid-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                linear-gradient(var(--border) 1px, transparent 1px),
                linear-gradient(90deg, var(--border) 1px, transparent 1px);
            background-size: 40px 40px; opacity: 0.15; z-index: -1; pointer-events: none;
        }

        .shell { width: 100%; max-width: 500px; display: flex; flex-direction: column; gap: 20px; z-index: 1; }

        /* --- HEADER --- */
        header { text-align: center; margin-top: 20px; text-transform: uppercase; }
        .logo-box { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 5px; }
        .logo-icon { width: 28px; height: 28px; fill: var(--neon); filter: drop-shadow(0 0 5px var(--neon)); }
        h1 { font-size: 26px; font-weight: 900; color: #fff; margin: 0; letter-spacing: 1px; }
        .badge-pro { background: var(--neon); color: #000; font-size: 10px; padding: 2px 6px; border-radius: 4px; transform: skew(-10deg); margin-left: 5px; }
        
        .tagline { 
            font-size: 12px; color: var(--neon); font-weight: 600; letter-spacing: 1px;
            text-shadow: 0 0 10px var(--neon-glow); margin-bottom: 5px;
        }
        .typing-status { font-family: monospace; font-size: 11px; color: #666; min-height: 14px; }

        /* --- DASHBOARD GAUGES --- */
        .dashboard-row { display: flex; justify-content: space-between; align-items: flex-end; gap: 8px; margin: 10px 0; }
        
        .gauge-box { position: relative; width: 32%; text-align: center; }
        
        .gauge-ring {
            width: 100%; padding-bottom: 100%; /* Square Aspect Ratio */
            border-radius: 50%; border: 3px solid #444; position: relative;
            background: radial-gradient(circle, #222 0%, #000 100%);
            box-shadow: inset 0 0 20px #000, 0 5px 15px rgba(0,0,0,0.5);
            overflow: hidden;
        }

        /* --- TICK MARKS & OVERLAYS --- */
        .ticks-overlay {
            position: absolute; width: 100%; height: 100%; border-radius: 50%;
            background: repeating-conic-gradient(from 225deg, rgba(255,255,255,0.2) 0deg 1deg, transparent 1deg 15deg);
            mask-image: radial-gradient(transparent 60%, black 61%);
            -webkit-mask-image: radial-gradient(transparent 60%, black 61%);
            z-index: 1;
        }

        .scratch-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%;
            background: 
                linear-gradient(115deg, transparent 40%, rgba(255,255,255,0.05) 45%, transparent 50%),
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.02) 11px, transparent 12px);
            z-index: 5; pointer-events: none;
        }

        .gauge-numbers span { position: absolute; color: #666; font-size: 8px; font-weight: bold; z-index: 2; }
        .n-0 { bottom: 20%; left: 20%; }
        .n-50 { top: 15%; left: 50%; transform: translateX(-50%); }
        .n-100 { bottom: 20%; right: 20%; }

        /* --- NEEDLE FIX --- */
        .needle {
            position: absolute; top: 50%; left: 50%; 
            width: 45%; /* Length */
            height: 3px; /* Thickness - FIXED */
            background: var(--danger); 
            transform-origin: 0% 50%; /* Rotate from center */
            transform: rotate(-135deg); 
            transition: transform 0.1s cubic-bezier(0.1, 0, 0.2, 1);
            box-shadow: 0 0 4px var(--danger); 
            border-radius: 2px;
            z-index: 4;
        }
        
        .gauge-center {
            position: absolute; top: 38%; left: 38%; width: 24%; height: 24%;
            background: linear-gradient(135deg, #444, #222); 
            border-radius: 50%; z-index: 5; border: 1px solid #111;
            box-shadow: 0 2px 5px rgba(0,0,0,0.8);
        }
        .gauge-label {
            font-size: 10px; color: #888; margin-top: 5px; text-transform: uppercase; font-weight: 700; letter-spacing: 0.5px;
        }
        .gauge-val {
            position: absolute; bottom: 25%; width: 100%; text-align: center;
            font-family: monospace; color: #fff; font-size: 10px; font-weight: bold; z-index: 1;
        }

        /* --- CONTROL PANEL --- */
        .panel {
            background: rgba(20, 20, 20, 0.95); border: 1px solid #444;
            border-radius: 16px; padding: 20px; backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .panel-title { 
            font-size: 12px; color: var(--neon); text-transform: uppercase; 
            border-bottom: 1px solid #333; padding-bottom: 8px; margin-bottom: 15px; 
            display: flex; justify-content: space-between;
        }

        .btn-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-bottom: 20px; }
        .mode-btn {
            background: #111; border: 2px solid #333; color: #888;
            height: 50px; border-radius: 8px; font-size: 10px; font-weight: 800;
            cursor: pointer; transition: all 0.1s; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            box-shadow: 0 4px 0 #000;
        }
        .mode-btn:active { transform: translateY(2px); box-shadow: 0 2px 0 #000; }
        .mode-btn:hover { border-color: #666; color: #fff; background: #1a1a1a; }
        
        .mode-btn.active { 
            background: #000; border-color: var(--neon); 
            color: var(--neon); box-shadow: 0 0 15px var(--neon-glow);
        }
        .mode-btn.dust-active {
            background: #222; border-color: #fff;
            color: #fff; box-shadow: 0 0 15px rgba(255,255,255,0.2);
        }

        /* --- VOLUME CONTROL --- */
        .vol-box {
            text-align: center; margin-top: 30px; margin-bottom: 15px;
            background: #000; padding: 12px; border-radius: 12px; border: 1px solid #333;
        }
        .vol-label { font-size: 10px; color: #666; text-transform: uppercase; margin-bottom: 8px; font-weight: 700; letter-spacing: 1px;}
        input[type=range] {
            width: 100%; -webkit-appearance: none; background: transparent;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 6px; background: #333; border-radius: 3px;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 18px; width: 18px; border-radius: 50%;
            background: var(--neon); margin-top: -6px; box-shadow: 0 0 10px var(--neon); cursor: grab;
        }

        /* --- COFFEE BUTTON --- */
        .btn-coffee {
            width: 100%; background: #000; border: 1px solid var(--neon);
            color: var(--neon); padding: 15px; border-radius: 12px;
            font-weight: 800; text-transform: uppercase; cursor: pointer;
            box-shadow: 0 0 10px var(--neon-glow); margin-bottom: 25px;
            display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: 0.2s;
        }
        .btn-coffee:hover { background: var(--neon); color: #000; box-shadow: 0 0 20px var(--neon); }
        
        /* --- TEST BUTTON --- */
        .test-zone { display: flex; justify-content: center; padding-bottom: 10px; }
        .btn-test {
            width: 80px; height: 80px; border-radius: 50%;
            background: radial-gradient(circle, #ff003c 0%, #800000 100%);
            border: 4px solid #333;
            box-shadow: 0 0 20px var(--danger-glow);
            color: white; font-weight: 900; font-size: 14px;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            text-transform: uppercase; letter-spacing: 1px;
            animation: pulse-red 2s infinite; transition: transform 0.1s;
        }
        .btn-test:active { transform: scale(0.95); background: #ff003c; }
        @keyframes pulse-red { 0% { box-shadow: 0 0 0 0 rgba(255, 0, 60, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(255, 0, 60, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 0, 60, 0); } }

        /* --- AD SLOT --- */
        .ad-slot {
            width: 100%; height: 100px; background: #080808; border: 1px dashed #333;
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            color: #444; font-size: 10px; margin-top: 5px;
        }

        footer { margin-top: 30px; text-align: center; font-size: 10px; color: #444; padding-bottom: 20px;}
        footer a { color: #666; text-decoration: none; margin: 0 8px; }

        #cookie-banner {
            display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: #111; padding: 15px 30px; border-radius: 50px; border: 1px solid var(--neon);
            z-index: 1000; color: #ccc; font-size: 12px;
        }
    </style>
</head>
<body>

<div class="grid-bg"></div>

<div class="shell">
    <header>
        <div class="logo-box">
            <svg class="logo-icon" viewBox="0 0 24 24"><path d="M12 22c4.97 0 9-4.03 9-9-4.5 0-9-5-9-13 0 8-4.5 13-9 13 0 4.97 4.03 9 9 9zM12 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
            <h1>SPEAKER CLEANER<span class="badge-pro">PRO</span></h1>
        </div>
        <div class="tagline">#1 Phone Speaker Utility</div>
        <div class="typing-status" id="type-text">System Standby...</div>
    </header>

    <div class="dashboard-row">
        <div class="gauge-box">
            <div class="gauge-ring">
                <div class="ticks-overlay"></div>
                <div class="scratch-overlay"></div>
                <div class="gauge-numbers"><span class="n-0">0</span><span class="n-50">50</span><span class="n-100">100</span></div>
                <div class="gauge-center"></div>
                <div class="needle" id="needle-load"></div>
                <div class="gauge-val" id="val-load">0%</div>
            </div>
            <div class="gauge-label">CPU LOAD</div>
        </div>
        <div class="gauge-box" style="width: 40%;">
            <div class="gauge-ring" style="border-color: var(--neon); box-shadow: 0 0 15px rgba(57,255,20,0.1);">
                <div class="ticks-overlay"></div>
                <div class="scratch-overlay"></div>
                <div class="gauge-numbers" style="color:var(--neon);"><span class="n-0">0</span><span class="n-50">10k</span><span class="n-100">20k</span></div>
                <div class="gauge-center" style="background: radial-gradient(#333,#000);"></div>
                <div class="needle" id="needle-hz" style="background: #fff; width: 45%; height: 3px; border-radius: 3px;"></div>
                <div class="gauge-val" id="val-hz" style="color: var(--neon); font-size: 13px;">0 Hz</div>
            </div>
            <div class="gauge-label" style="color: var(--neon);">FREQUENCY</div>
        </div>
        <div class="gauge-box">
            <div class="gauge-ring">
                <div class="ticks-overlay"></div>
                <div class="scratch-overlay"></div>
                <div class="gauge-numbers"><span class="n-0">0</span><span class="n-50">5</span><span class="n-100">10</span></div>
                <div class="gauge-center"></div>
                <div class="needle" id="needle-db"></div>
                <div class="gauge-val" id="val-db">0</div>
            </div>
            <div class="gauge-label">GAIN</div>
        </div>
    </div>

    <div class="panel">
        <div class="panel-title"><span>ðŸ’§ Water Ejection Modes</span> <span>165Hz+</span></div>
        <div class="btn-grid">
            <button class="mode-btn" onclick="setMode('water', 1)">STD<br>165</button>
            <button class="mode-btn" onclick="setMode('water', 2)">LOW<br>RMB</button>
            <button class="mode-btn" onclick="setMode('water', 3)">RAMP<br>UP</button>
            <button class="mode-btn" onclick="setMode('water', 4)">PULSE<br>MIX</button>
            <button class="mode-btn" onclick="setMode('water', 5)">DEEP<br>BASS</button>
        </div>

        <div class="panel-title" style="margin-top: 25px;"><span>ðŸ’¨ Dust Purge Modes</span> <span>Ultra-Sonic</span></div>
        <div class="btn-grid">
            <button class="mode-btn" onclick="setMode('dust', 1)">HIGH<br>PITCH</button>
            <button class="mode-btn" onclick="setMode('dust', 2)">WAVE<br>SWP</button>
            <button class="mode-btn" onclick="setMode('dust', 3)">SPIKE<br>PULSE</button>
            <button class="mode-btn" onclick="setMode('dust', 4)">MOSQ<br>17k</button>
            <button class="mode-btn" onclick="setMode('dust', 5)">MAX<br>PWR</button>
        </div>

        <div class="vol-box">
            <div class="vol-label">Master Output Volume</div>
            <input type="range" id="vol-slider" min="0" max="1" step="0.01" value="1" oninput="updateVolume(this.value)">
        </div>

        <button class="btn-coffee" onclick="window.open('https://buymeacoffee.com/donshehab')">
            <svg style="width:20px;height:20px;fill:currentColor" viewBox="0 0 24 24"><path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"/></svg>
            Buy Me A Coffee
        </button>

        <div class="test-zone">
            <button class="btn-test" id="btn-test" onclick="toggleTest()">TEST<br>SPKR</button>
        </div>
    </div>

    <div class="ad-slot">
        <span style="opacity: 0.5;">Advertisement Space</span>
    </div>

    <footer>
        <a href="privacy.html">Privacy</a> â€¢ <a href="terms.html">Terms</a> â€¢ <a href="contact.html">Contact</a>
        <br><br>Â© 2026 WaterInMySpeaker.com
    </footer>
</div>

<div id="cookie-banner">
    <span style="margin-right: 15px;">We use cookies for analytics.</span>
    <button onclick="acceptCookies()" style="background: var(--neon); border: none; padding: 5px 15px; border-radius: 15px; font-weight: bold; cursor:pointer;">OK</button>
</div>

<script>
    // --- COOKIE ---
    if (!localStorage.getItem('cookiesAccepted')) document.getElementById('cookie-banner').style.display = 'block';
    function acceptCookies() { localStorage.setItem('cookiesAccepted', 'true'); document.getElementById('cookie-banner').style.display = 'none'; }

    // --- TYPING HEADER ---
    const typeText = document.getElementById('type-text');
    const phrases = ["System Ready.", "Select Cleaning Mode.", "Hardware Detected."];
    let pIdx = 0;
    function typeWriter(text, i, cb) {
        if (i < text.length) {
            typeText.innerHTML = text.substring(0, i+1);
            setTimeout(() => typeWriter(text, i+1, cb), 50);
        } else setTimeout(cb, 2000);
    }
    function loopType() {
        typeWriter(phrases[pIdx], 0, () => {
            pIdx = (pIdx + 1) % phrases.length;
            loopType();
        });
    }
    loopType();

    // --- AUDIO ENGINE ---
    let ctx, osc, gainNode, interval;
    let isPlaying = false;
    let currentVol = 1;

    async function initAudio() {
        if (!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();
        if (ctx.state === 'suspended') await ctx.resume();
    }

    function updateVolume(val) {
        currentVol = val;
        if(gainNode) gainNode.gain.setTargetAtTime(val, ctx.currentTime, 0.1);
        updateGauges(0, val, true); // Update only volume gauge visually
    }

    function stop() {
        if (osc) { try{osc.stop(); osc.disconnect();}catch(e){} osc = null; }
        if (interval) clearInterval(interval);
        isPlaying = false;
        resetGauges();
        document.querySelectorAll('.mode-btn').forEach(b => {
            b.classList.remove('active');
            b.classList.remove('dust-active');
        });
        document.getElementById('btn-test').style.animation = "pulse-red 2s infinite";
        document.getElementById('btn-test').innerHTML = "TEST<br>SPKR";
    }

    function playTone(freq, type='sine') {
        osc = ctx.createOscillator();
        gainNode = ctx.createGain();
        osc.type = type;
        osc.frequency.value = freq;
        osc.connect(gainNode);
        gainNode.connect(ctx.destination);
        gainNode.gain.setValueAtTime(0.01, ctx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(currentVol, ctx.currentTime + 0.1);
        osc.start();
        
        // Start visuals
        visualizerLoop(freq);
    }

    // --- GAUGE LOGIC ---
    function visualizerLoop(baseFreq) {
        if (!isPlaying) return;
        
        // Jitter Frequency for visual effect
        let dispFreq = baseFreq + (Math.random() * 10);
        // CPU Load Simulate
        let load = 30 + Math.random() * 40;
        
        updateGauges(dispFreq, currentVol, false, load);
        
        setTimeout(() => visualizerLoop(baseFreq), 100);
    }

    function updateGauges(hz, vol, volOnly=false, load=0) {
        // Needle Range: -135deg (0) to 135deg (MAX) = 270deg span
        
        // 1. Gain Needle
        const vRot = -135 + (vol * 270);
        document.getElementById('needle-db').style.transform = `rotate(${vRot}deg)`;
        document.getElementById('val-db').innerText = Math.round(vol * 10);
        
        if (volOnly && !isPlaying) return;

        // 2. Hz Needle (Scale 0 to 20000)
        let hRot = -135 + (Math.min(hz, 20000) / 20000 * 270);
        if (hz === 0) hRot = -135;
        document.getElementById('needle-hz').style.transform = `rotate(${hRot}deg)`;
        if (hz > 0) document.getElementById('val-hz').innerText = Math.round(hz) + " Hz";

        // 3. Load Needle
        if (isPlaying) {
            const lRot = -135 + (load / 100 * 270);
            document.getElementById('needle-load').style.transform = `rotate(${lRot}deg)`;
            document.getElementById('val-load').innerText = Math.round(load) + "%";
        }
    }

    function resetGauges() {
        document.getElementById('needle-hz').style.transform = `rotate(-135deg)`;
        document.getElementById('val-hz').innerText = "0 Hz";
        document.getElementById('needle-load').style.transform = `rotate(-135deg)`;
        document.getElementById('val-load').innerText = "0%";
        // Keep gain where slider is
        updateGauges(0, currentVol, true);
    }

    // --- MODES ---
    async function setMode(type, id) {
        await initAudio();
        stop();
        isPlaying = true;
        
        // Highlight Button
        const btnIndex = (type === 'water' ? 0 : 5) + (id - 1);
        const btn = document.querySelectorAll('.mode-btn')[btnIndex];
        btn.classList.add(type === 'water' ? 'active' : 'dust-active');

        // Logic
        if (type === 'water') {
            const freqs = [165, 80, 120, 165, 40];
            const waves = ['sawtooth', 'sine', 'square', 'sawtooth', 'sine'];
            playTone(freqs[id-1], waves[id-1]);
        } else {
            // Dust Logic (Sweeps/High Pitch)
            if (id === 1) playTone(10000, 'sine');
            if (id === 2) { // Sweep
                playTone(15000, 'sawtooth');
                interval = setInterval(() => {
                    if(osc) osc.frequency.setValueAtTime(15000 + Math.random()*4000, ctx.currentTime);
                }, 150);
            }
            if (id === 3) playTone(12000, 'square');
            if (id === 4) playTone(17000, 'sine');
            if (id === 5) playTone(20000, 'sawtooth');
        }
    }

    async function toggleTest() {
        await initAudio();
        if (isPlaying) stop();
        else {
            isPlaying = true;
            document.getElementById('btn-test').style.animation = "none";
            document.getElementById('btn-test').style.transform = "scale(0.95)";
            document.getElementById('btn-test').innerText = "STOP";
            playTone(440, 'sine'); // Standard A4 Test Tone
        }
    }

</script>
</body>
</html>
