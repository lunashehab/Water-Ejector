<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5129097020907805" crossorigin="anonymous"></script>

    <meta charset="UTF-8" />
    <title>Speaker Cleaner Pro | Fix Water & Dust Damage</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Fix muffled speakers in 30 seconds. The #1 Water Eject shortcut. Scientifically tested 165Hz frequencies. Safe, free, and no app required.">
    <meta name="keywords" content="water eject shortcut, fix my speaker, get water out of phone, speaker cleaner, 165hz sound, remove water from speaker, clean speaker dust">
    <meta name="author" content="Don System">
    <link rel="canonical" href="https://waterinmyspeaker.com/" />
    
    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">

    <meta property="og:title" content="Water In My Speaker — Remove Water & Dust Instantly">
    <meta property="og:description" content="#1 viral phone speaker water and dust cleaner — 10M+ visits">
    <meta property="og:url" content="https://waterinmyspeaker.com">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://waterinmyspeaker.com/preview.png">
    <meta property="og:site_name" content="Water In My Speaker">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">

    <script type="application/ld+json">
    [
        {
          "@context": "https://schema.org",
          "@type": "SoftwareApplication",
          "name": "Speaker Cleaner Pro",
          "alternateName": "Water Eject Speaker Cleaner",
          "applicationCategory": "UtilityApplication",
          "operatingSystem": "Any",
          "url": "https://waterinmyspeaker.com",
          "description": "A free online tool that removes water from your phone speaker using a high‑frequency 165Hz eject sound.",
          "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
          "featureList": "Water Ejection, Dust Removal, 165Hz Frequency, Auto-Cycle Cleaning"
        },
        {
          "@context": "https://schema.org",
          "@type": "WebSite",
          "name": "Water In My Speaker",
          "url": "https://waterinmyspeaker.com",
          "description": "Remove water from your phone speaker instantly using our water eject sound tool.",
          "publisher": {
            "@type": "Organization",
            "name": "Water In My Speaker",
            "logo": { "@type": "ImageObject", "url": "https://waterinmyspeaker.com/logo.png" }
          },
          "potentialAction": {
            "@type": "SearchAction",
            "target": "https://waterinmyspeaker.com/?q={search_term_string}",
            "query-input": "required name=search_term_string"
          }
        },
        {
          "@context": "https://schema.org",
          "@type": "FAQPage",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "Is this sound safe for my speakers?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes. We use specific sine waves (165Hz) designed to vibrate the speaker diaphragm without exceeding safe amplitude limits. It essentially 'shakes' the water off without damaging hardware."
              }
            },
            {
              "@type": "Question",
              "name": "How long should I run the cleaning cycle?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "We recommend running 'Pro Mode' (Auto Cycle) 2-3 times. If water is still trapped, position your phone upright and run it for 5 minutes."
              }
            },
            {
              "@type": "Question",
              "name": "Does this work for iPhone and Android?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Absolutely. It works on any device with a speaker, including iPhone, Samsung Galaxy, Pixel, Xiaomi, and even smartwatches."
              }
            },
            {
              "@type": "Question",
              "name": "What should I do if the sound is still muffled?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Wait 10 minutes for evaporation, then try again. Gravity helps—keep the speaker facing down while the sound plays."
              }
            },
            {
              "@type": "Question",
              "name": "Why can't I hear anything?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Your volume might be too low, or water has temporarily shorted the connection. Turn volume to max and run the '165Hz' mode."
              }
            }
          ]
        }
    ]
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;500;700;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg: #000000;
            --panel: #0a0a0a;
            --accent: #ff003c; /* MARS RED */
            --accent-glow: rgba(255, 0, 60, 0.5);
            --neon-green: #39ff14; /* COFFEE GREEN */
            --text-main: #ffffff;
            --text-muted: #666666;
            --border: #333333;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Exo 2', sans-serif;
            background: var(--bg);
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            overflow-x: hidden;
        }

        /* SPACE GRID BACKGROUND */
        .space-grid {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: 
                linear-gradient(rgba(255, 0, 60, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255, 0, 60, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            background-position: center top;
            transform: perspective(500px) rotateX(20deg) scale(1.5);
            opacity: 0.2; z-index: -1; pointer-events: none;
            mask-image: linear-gradient(to bottom, transparent 0%, black 40%);
            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 40%);
        }

        .shell { width: 100%; max-width: 500px; display: flex; flex-direction: column; gap: 20px; z-index: 1; }

        /* --- LANGUAGE SELECTOR --- */
        .lang-box {
            position: absolute; top: 0; right: 0; z-index: 100;
        }
        select.lang-select {
            background: rgba(0,0,0,0.8); color: #fff; border: 1px solid #333;
            padding: 5px 10px; border-radius: 4px; font-size: 10px;
            font-family: 'Exo 2', sans-serif; cursor: pointer; text-transform: uppercase;
        }
        select.lang-select:focus { outline: none; border-color: var(--accent); }

        /* --- HEADER --- */
        header { text-align: center; margin-top: 40px; text-transform: uppercase; position: relative; }
        .logo-box { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 5px; }
        .logo-icon { width: 32px; height: 32px; fill: var(--accent); filter: drop-shadow(0 0 10px var(--accent)); }
        h1 { font-size: 28px; font-weight: 900; color: #fff; margin: 0; letter-spacing: 2px; }
        .badge-pro { 
            background: var(--accent); color: #fff; font-size: 10px; padding: 2px 6px; 
            border-radius: 2px; margin-left: 5px; letter-spacing: 1px;
        }
        .trust-badge-header {
            display: inline-block; border: 1px solid #333; padding: 4px 10px; border-radius: 20px;
            font-size: 9px; color: #888; margin-top: 5px; background: rgba(255,255,255,0.05);
        }
        .trust-badge-header span { color: var(--accent); font-weight: bold; }
        .tagline { 
            font-size: 11px; color: var(--text-muted); font-weight: 600; letter-spacing: 3px;
            margin-bottom: 5px; margin-top: 10px;
        }
        .typing-status { font-family: monospace; font-size: 12px; color: var(--accent); min-height: 16px; text-shadow: 0 0 5px var(--accent-glow); }

        /* --- SMART DEVICE BAR --- */
        #smart-device-bar {
            margin-top: 10px; font-size: 10px; color: var(--neon-green); 
            background: rgba(57, 255, 20, 0.1); border: 1px solid var(--neon-green); 
            padding: 6px 12px; border-radius: 4px; display: inline-block; 
            text-transform: uppercase; letter-spacing: 1px; opacity: 0; 
            animation: fadeIn 2s forwards 1s; transition: 0.5s;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        /* --- GAUGE ENGINE --- */
        .dashboard-row { display: flex; justify-content: space-between; align-items: flex-end; gap: 10px; margin: 25px 0 10px 0; }
        .gauge-box { position: relative; width: 30%; text-align: center; }
        .gauge-box.center-gauge { width: 40%; }
        .gauge-ring {
            width: 100%; padding-bottom: 100%;
            border-radius: 50%; border: 2px solid #333; position: relative;
            background: radial-gradient(circle, #151515 0%, #000 100%);
            box-shadow: inset 0 0 20px #000;
            overflow: hidden;
            transition: border-color 0.3s, box-shadow 0.3s;
        }
        .gauge-ring.active {
            border-color: var(--accent);
            box-shadow: 0 0 20px var(--accent-glow), inset 0 0 20px #000;
        }
        .ticks-overlay {
            position: absolute; width: 100%; height: 100%; border-radius: 50%;
            background: repeating-conic-gradient(from 210deg, rgba(255, 255, 255, 0.3) 0deg 1deg, transparent 1deg 15deg);
            mask-image: radial-gradient(transparent 60%, black 61%);
            -webkit-mask-image: radial-gradient(transparent 60%, black 61%);
            z-index: 1; opacity: 0.5;
        }
        .gauge-numbers span { position: absolute; color: #666; font-size: 8px; font-weight: bold; z-index: 2; }
        .n-0 { bottom: 25%; left: 20%; }
        .n-50 { top: 12%; left: 50%; transform: translateX(-50%); }
        .n-100 { bottom: 25%; right: 20%; }
        .needle {
            position: absolute; 
            bottom: 50%; left: 50%; width: 2px; height: 45%; margin-left: -1px;
            background: var(--accent); 
            transform-origin: bottom center; 
            transform: rotate(-120deg); 
            transition: transform 0.2s cubic-bezier(0.1, 0, 0.2, 1);
            box-shadow: 0 0 8px var(--accent); z-index: 4; border-radius: 2px;
        }
        .gauge-center {
            position: absolute; top: 40%; left: 40%; width: 20%; height: 20%;
            background: #222; border-radius: 50%; z-index: 5; border: 1px solid #111;
            box-shadow: 0 2px 5px #000;
        }
        .gauge-label {
            font-size: 9px; color: #555; margin-top: 8px; text-transform: uppercase; font-weight: 700; letter-spacing: 1px;
        }
        .gauge-val {
            position: absolute; bottom: 25%; width: 100%; text-align: center;
            font-family: monospace; color: var(--accent); font-size: 10px; font-weight: bold; z-index: 1;
            text-shadow: 0 0 5px var(--accent-glow);
        }

        /* --- STOP BUTTON (ROUND & GLOWING) --- */
        .btn-toggle-master {
            width: 90px;
            height: 90px;
            background: #050505; 
            border: 2px solid var(--accent); 
            color: var(--accent);
            border-radius: 50%; /* CIRCLE ROUND */
            font-weight: 900; 
            text-transform: uppercase;
            cursor: pointer; 
            margin: 0 auto 20px auto; 
            transition: 0.3s; 
            font-size: 14px;
            box-shadow: 0 0 15px var(--accent); /* RED GLOW */
            display: flex; align-items: center; justify-content: center;
            -webkit-tap-highlight-color: transparent;
            animation: pulse-glow 2s infinite;
        }
        .btn-toggle-master:active { transform: scale(0.95); }
        
        @keyframes pulse-glow {
            0% { box-shadow: 0 0 10px var(--accent); }
            50% { box-shadow: 0 0 25px var(--accent), inset 0 0 10px rgba(255,0,60,0.3); }
            100% { box-shadow: 0 0 10px var(--accent); }
        }

        /* --- CONTROL PANEL --- */
        .panel {
            background: rgba(10, 10, 10, 0.85); border: 1px solid var(--border);
            border-radius: 12px; padding: 20px; backdrop-filter: blur(10px);
            margin-bottom: 20px;
        }
        .panel-title { 
            font-size: 11px; color: #fff; text-transform: uppercase; letter-spacing: 1px;
            border-bottom: 1px solid #333; padding-bottom: 8px; margin-bottom: 15px; 
            display: flex; justify-content: space-between; font-weight: 700;
        }
        .panel-title span:last-child { color: var(--accent); }

        /* --- SYSTEM LOG --- */
        #system-log {
            font-family: monospace; font-size: 9px; color: var(--neon-green);
            background: #000; border: 1px solid #222; padding: 8px; height: 45px;
            overflow-y: hidden; margin-bottom: 15px; border-radius: 4px; opacity: 0.8;
            line-height: 1.4;
        }

        .btn-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin-bottom: 25px; }
        .mode-btn {
            background: #050505; border: 1px solid #333; color: #666;
            height: 50px; border-radius: 6px; font-size: 8px; font-weight: 700;
            cursor: pointer; transition: all 0.2s; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center; line-height: 1.2;
        }
        .mode-btn:hover { border-color: #888; color: #fff; }
        .mode-btn.active { 
            background: rgba(255,0,60,0.1); border-color: var(--accent); 
            color: #fff; box-shadow: 0 0 15px var(--accent-glow);
        }

        /* --- DIAGNOSTICS & OPS --- */
        .diag-grid { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 10px; margin-bottom: 25px; }
        .btn-diag {
            background: #111; border: 1px solid #333; color: #888; height: 40px;
            border-radius: 4px; font-size: 9px; font-weight: 700; cursor: pointer;
            transition: 0.2s; text-transform: uppercase;
        }
        .btn-diag:hover { border-color: var(--accent); color: #fff; }
        .btn-diag.active { background: var(--accent); color: #fff; }

        .btn-scanner {
            background: #111; border: 1px solid #333; color: #888; height: 40px;
            border-radius: 4px; font-size: 9px; font-weight: 700; cursor: pointer;
            transition: 0.2s; text-transform: uppercase;
        }
        .btn-scanner:hover { border-color: var(--accent); color: #fff; }

        .ops-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        .btn-ops {
            height: 50px; border: 1px solid var(--accent); background: rgba(255, 0, 60, 0.05);
            color: #fff; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;
            border-radius: 6px; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
            transition: 0.2s; font-size: 10px; position: relative; overflow: hidden;
        }
        .btn-ops:hover { background: var(--accent); box-shadow: 0 0 15px var(--accent-glow); }
        .btn-ops.active { background: var(--accent); color: #000; box-shadow: 0 0 20px var(--accent); }
        .ops-label {
            position: absolute; top: 2px; right: 4px; font-size: 7px; 
            background: #fff; color: #000; padding: 1px 3px; border-radius: 2px; font-weight: 900;
        }
        .btn-ops.active .ops-label { background: #000; color: #fff; }

        /* --- PROGRESS & SCANNER --- */
        .progress-container {
            width: 100%; height: 6px; background: #222; border-radius: 3px; overflow: hidden; margin-bottom: 20px;
            opacity: 0.5; transition: opacity 0.3s;
        }
        .progress-container.active { opacity: 1; }
        .progress-fill { height: 100%; width: 0%; background: var(--accent); box-shadow: 0 0 10px var(--accent); transition: width 0.1s linear; }

        .scanner-box { 
            background: #050505; border: 1px solid #222; padding: 10px; border-radius: 6px; 
            margin-bottom: 25px; position: relative; overflow: hidden;
        }
        .scan-label { font-size: 9px; color: #666; text-transform: uppercase; margin-bottom: 5px; display:flex; justify-content:space-between;}
        .scan-bar-bg { height: 6px; background: #222; border-radius: 3px; overflow: hidden; }
        .scan-bar-fill { 
            height: 100%; background: var(--accent); width: 0%; 
            transition: width 0.5s ease-out; box-shadow: 0 0 10px var(--accent); 
        }
        .scanner-overlay {
            position: absolute; top:0; left:0; width:100%; height:100%;
            background: linear-gradient(90deg, transparent, rgba(255, 0, 60, 0.1), transparent);
            transform: translateX(-100%); transition: 0.5s; pointer-events: none;
        }
        .scanning .scanner-overlay { animation: scan-anim 1.5s infinite linear; }
        @keyframes scan-anim { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }

        /* --- VISUALIZER --- */
        .viz-box {
            display: flex; align-items: flex-end; justify-content: center; gap: 2px;
            height: 30px; margin-bottom: 10px; opacity: 0.8;
        }
        .viz-bar {
            width: 4px; background: var(--accent); border-radius: 2px 2px 0 0;
            height: 2px; transition: height 0.1s;
        }

        /* --- VOLUME & STATS --- */
        .vol-box {
            text-align: center; margin-top: 10px; margin-bottom: 15px;
            background: #050505; padding: 15px; border-radius: 8px; border: 1px solid #222;
        }
        .vol-label { font-size: 9px; color: #888; text-transform: uppercase; margin-bottom: 10px; font-weight: 700; letter-spacing: 1px;}
        input[type=range] {
            width: 100%; -webkit-appearance: none; background: transparent;
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 4px; background: #333; border-radius: 2px;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; height: 16px; width: 16px; border-radius: 50%;
            background: var(--accent); margin-top: -6px; box-shadow: 0 0 10px var(--accent); cursor: grab;
            border: 2px solid #fff;
        }

        .stats-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 25px; }
        .stat-card { background: #080808; border: 1px solid #222; padding: 10px; border-radius: 6px; text-align: center; }
        .stat-val { font-size: 16px; font-weight: 900; color: #fff; margin-bottom: 2px; }
        .stat-label { font-size: 8px; color: #666; text-transform: uppercase; }

        /* --- TRUST GRID --- */
        .trust-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
        .trust-item {
            background: #080808; border: 1px solid #222; padding: 10px; 
            border-radius: 4px; font-size: 9px; color: #888;
            display: flex; align-items: center; gap: 8px; font-weight: 600;
        }
        .trust-item svg { width: 14px; height: 14px; fill: var(--accent); }

        /* --- FOOTER & SHARE --- */
        .btn-share {
            width: 100%; background: #fff; border: none; color: #000; padding: 15px; border-radius: 8px;
            font-weight: 900; text-transform: uppercase; cursor: pointer;
            box-shadow: 0 0 20px rgba(255,255,255,0.2); margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 10px;
            transition: 0.2s; letter-spacing: 1px; font-size: 11px;
        }
        .btn-share:hover { background: var(--accent); color: #fff; box-shadow: 0 0 20px var(--accent); }
        
        .footer-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .btn-mini {
            padding: 12px; border-radius: 6px; font-size: 9px; font-weight: 800;
            text-transform: uppercase; cursor: pointer; display: flex; 
            align-items: center; justify-content: center; gap: 5px; text-decoration: none;
            transition: 0.2s; background: transparent; text-align: center;
        }
        .btn-green { border: 1px solid var(--neon-green); color: var(--neon-green); box-shadow: 0 0 5px rgba(57, 255, 20, 0.2); }
        .btn-green:hover { background: var(--neon-green); color: #000; box-shadow: 0 0 15px var(--neon-green); }

        /* --- PRIVACY STATEMENT STYLE --- */
        .privacy-footer-box {
            background: #080808; border: 1px solid #222; padding: 15px; border-radius: 8px;
            margin-top: 25px; text-align: left;
        }
        .privacy-footer-box h4 { font-size: 10px; color: var(--accent); text-transform: uppercase; margin-bottom: 8px; letter-spacing: 1px; }
        .privacy-footer-box p { font-size: 9px; color: #666; line-height: 1.4; margin-bottom: 5px; }
        .privacy-footer-box ul { list-style: none; padding: 0; margin-bottom: 10px; }
        .privacy-footer-box li { font-size: 9px; color: #888; display: flex; align-items: center; gap: 5px; margin-bottom: 3px; }
        .privacy-footer-box li span { color: var(--neon-green); font-weight: bold; }

        .qr-wrapper {
            background: #fff; padding: 10px; border-radius: 8px; width: 140px; margin: 0 auto 10px auto;
            border: 2px solid var(--accent); box-shadow: 0 0 15px var(--accent-dim);
        }
        .qr-wrapper img { width: 100%; display: block; }

        .seo-box { text-align: left; padding: 10px; }
        .seo-box h3 { font-size: 12px; color: #fff; text-transform: uppercase; margin-bottom: 10px; letter-spacing: 1px; }
        .seo-box p { font-size: 10px; color: #888; margin-bottom: 10px; line-height: 1.6; }
        .seo-box strong { color: var(--accent); }

        .ad-slot {
            width: 100%; height: 100px; background: #050505; border: 1px solid #222; border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; color: #333; font-size: 9px; margin-top: 10px;
        }

        /* --- FAQ STYLES --- */
        .faq-item { margin-bottom: 10px; border-bottom: 1px solid #222; padding-bottom: 5px; }
        .faq-item:last-child { border-bottom: none; }
        details > summary {
            list-style: none; outline: none; cursor: pointer; font-size: 10px; 
            color: #fff; font-weight: 700; padding: 8px 0; transition: color 0.2s;
            display: flex; align-items: center; gap: 8px;
        }
        details > summary::-webkit-details-marker { display: none; }
        details > summary:hover { color: var(--accent); }
        details > summary::before { content: '>'; color: var(--accent); font-weight: 900; transition: transform 0.2s; }
        details[open] > summary::before { transform: rotate(90deg); }
        details > p {
            margin: 0; padding: 5px 0 10px 15px; font-size: 9px; color: #888; line-height: 1.5;
            border-left: 1px solid #333;
        }

        footer { margin-top: 40px; text-align: center; font-size: 10px; color: #444; padding-bottom: 20px;}
        footer a { color: #666; text-decoration: none; margin: 0 10px; transition: color 0.2s; }
        footer a:hover { color: var(--accent); }
        .don-sig { display: block; margin-top: 15px; font-weight: 900; color: #333; text-transform: uppercase; letter-spacing: 2px; font-size: 9px; }

        #cookie-banner {
            display: none; position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: #111; padding: 15px 30px; border-radius: 4px; border: 1px solid var(--accent);
            z-index: 1000; color: #ccc; font-size: 11px; box-shadow: 0 0 20px rgba(0,0,0,0.8);
        }
        
        #copy-toast {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: var(--accent); color: white; padding: 10px 20px;
            border-radius: 20px; font-size: 12px; font-weight: bold; opacity: 0; pointer-events: none; transition: 0.3s; z-index: 2000;
        }
        #copy-toast.show { opacity: 1; top: 40px; }
    </style>
</head>
<body>

<div class="space-grid"></div>
<div id="copy-toast">Link Copied!</div>

<div class="shell" id="app-shell">
    <header>
        <div class="lang-box">
            <select aria-label="Select Language" class="lang-select" onchange="changeLang(this.value)">
                <option value="en">English</option>
                <option value="ar">العربية</option>
                <option value="ru">Русский</option>
                <option value="es">Español</option>
                <option value="cn">中文</option>
                <option value="fr">Français</option>
            </select>
        </div>
        <div class="trust-badge-header"><span id="lbl-trust-icon">✓</span> <span id="lbl-trust">TRUSTED BY 10M+ DEVICES</span></div>
        <div class="logo-box" style="margin-top:15px;">
            <svg class="logo-icon" viewBox="0 0 24 24"><path d="M12 22c4.97 0 9-4.03 9-9-4.5 0-9-5-9-13 0 8-4.5 13-9 13 0 4.97 4.03 9 9 9zM12 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/></svg>
            <h1>SPEAKER CLEANER<span class="badge-pro">PRO</span></h1>
        </div>
        <div class="tagline" id="lbl-tagline">The #1 High-Frequency Water Ejector</div>
        <div class="typing-status" id="type-text">System Online.</div>
        
        <div id="smart-device-bar">
            <span id="device-name">SCANNING HARDWARE...</span>
        </div>
    </header>

    <div class="dashboard-row">
        <div class="gauge-box">
            <div class="gauge-ring" id="ring-load">
                <div class="ticks-overlay"></div>
                <div class="gauge-numbers"><span class="n-0">0</span><span class="n-50">50</span><span class="n-100">100</span></div>
                <div class="gauge-center"></div>
                <div class="needle" id="needle-load"></div>
                <div class="gauge-val" id="val-load">0%</div>
            </div>
            <div class="gauge-label" id="lbl-gauge-cpu">CPU LOAD</div>
        </div>
        
        <div class="gauge-box center-gauge" style="width: 40%;">
            <div class="gauge-ring active" id="ring-hz">
                <div class="ticks-overlay"></div>
                <div class="gauge-numbers" style="color: #888;"><span class="n-0">0</span><span class="n-50">10k</span><span class="n-100">20k</span></div>
                <div class="gauge-center"></div>
                <div class="needle" id="needle-hz" style="height: 48%; background: #fff; box-shadow: 0 0 10px #fff;"></div>
                <div class="gauge-val" id="val-hz" style="color: #fff; text-shadow:none;">0 Hz</div>
            </div>
            <div class="gauge-label" style="color: var(--accent);" id="lbl-gauge-freq">FREQUENCY</div>
        </div>

        <div class="gauge-box">
            <div class="gauge-ring" id="ring-db">
                <div class="ticks-overlay"></div>
                <div class="gauge-numbers"><span class="n-0">0</span><span class="n-50">5</span><span class="n-100">10</span></div>
                <div class="gauge-center"></div>
                <div class="needle" id="needle-db"></div>
                <div class="gauge-val" id="val-db">0</div>
            </div>
            <div class="gauge-label" id="lbl-gauge-gain">GAIN</div>
        </div>
    </div>

    <button id="master-toggle" class="btn-toggle-master" onclick="stop()" aria-label="Stop Cleaning">STOP</button>
    <div style="text-align: center; margin-bottom: 20px; font-size: 11px; font-weight: 700; color: #fff; text-transform: uppercase; letter-spacing: 1px;">Turn your phone volume to max.</div>

    <div class="panel">
        <div class="panel-title"><span id="lbl-panel-test">Speaker Test</span> <span id="lbl-panel-iso">Isolation</span></div>
        <div class="diag-grid">
            <button class="btn-diag" id="btn-left" onclick="runDiagnostic('left')" aria-label="Test Left Speaker">LEFT</button>
            <button class="btn-diag" id="btn-right" onclick="runDiagnostic('right')" aria-label="Test Right Speaker">RIGHT</button>
            <button class="btn-diag" id="btn-bass" onclick="runDiagnostic('bass')" aria-label="Test Bass">BASS</button>
            <button class="btn-diag" id="btn-treble" onclick="runDiagnostic('treble')" aria-label="Test Treble">TREBLE</button>
        </div>

        <div class="panel-title"><span id="lbl-panel-ops">Mission Log</span> <span id="lbl-panel-deep">Telemetry</span></div>
        
        <div id="system-log">> WAITING FOR COMMAND...</div>

        <div class="ops-grid">
            <button class="btn-ops" id="btn-deep" onclick="runDeepClean()" aria-label="Run Pro Mode Cleaning">
                <span class="ops-label" id="lbl-pro">PRO MODE</span>
                <span class="boost-icon"></span> <span id="lbl-auto">AUTO CYCLE</span>
            </button>
            <button class="btn-ops" id="btn-boost" onclick="toggleBoost()" aria-label="Toggle Turbo Mode">
                <span class="ops-label" id="lbl-turbo">TURBO MODE</span>
                <span class="boost-icon"></span> <span id="lbl-boost">BOOST</span>
            </button>
        </div>
        
        <div class="progress-container" id="prog-cont">
            <div class="progress-fill" id="prog-fill"></div>
        </div>

        <div class="panel-title"><span id="lbl-panel-dust">Dust Integrity</span> <span id="lbl-panel-meter">Meter</span></div>
        <div class="scanner-box" id="dust-box">
            <div class="scanner-overlay"></div>
            <div class="scan-label"><span id="lbl-contam">Contamination Level</span> <span id="dust-val">0%</span></div>
            <div class="scan-bar-bg"><div class="scan-bar-fill" id="dust-bar" style="background: #ffaa00; box-shadow: 0 0 10px #ffaa00;"></div></div>
            <button class="btn-scanner" id="btn-check" style="width:100%; margin-top:10px; border-color:#ffaa00; color:#ffaa00;" onclick="runScanner('dust')" aria-label="Check Dust Level">CHECK LEVEL</button>
        </div>
    </div>

    <div class="panel">
        <div class="panel-title"><span id="lbl-mode-water">Water-Expulsion</span> <span id="lbl-mode-mode1">Mode</span></div>
        <div class="btn-grid">
            <button class="mode-btn" onclick="setMode('water', 1)" aria-label="165Hz Apple Mode">APPLE<br>165Hz</button>
            <button class="mode-btn" onclick="setMode('water', 2)" aria-label="200Hz Press Mode">PRESS<br>200Hz</button>
            <button class="mode-btn" onclick="setMode('water', 3)" aria-label="285Hz Hydro Mode">HYDRO<br>285Hz</button>
            <button class="mode-btn" onclick="setMode('water', 4)" aria-label="350Hz Wave Mode">WAVE<br>350Hz</button>
            <button class="mode-btn" onclick="setMode('water', 5)" aria-label="440Hz Air Mode">AIR<br>440Hz</button>
        </div>

        <div class="panel-title"><span id="lbl-mode-dust">Dust-Shake</span> <span id="lbl-mode-mode2">Mode</span></div>
        <div class="btn-grid">
            <button class="mode-btn" onclick="setMode('dust', 1)" aria-label="60Hz Shake Mode">SHAKE<br>60Hz</button>
            <button class="mode-btn" onclick="setMode('dust', 2)" aria-label="120Hz Breaker Mode">BRKR<br>120Hz</button>
            <button class="mode-btn" onclick="setMode('dust', 3)" aria-label="500Hz Mesh Mode">MESH<br>500Hz</button>
            <button class="mode-btn" onclick="setMode('dust', 4)" aria-label="800Hz Fine Mode">FINE<br>800Hz</button>
            <button class="mode-btn" onclick="setMode('dust', 5)" aria-label="1kHz Final Mode">FINAL<br>1kHz</button>
        </div>

        <div class="panel-title" style="margin-top:20px;"><span id="lbl-spec">Live Spectrum Analysis</span></div>
        <div class="viz-box" id="viz-container"></div>

        <div class="vol-box">
            <div class="vol-label" id="lbl-vol">Volume Calibration</div>
            <input type="range" id="vol-slider" min="0" max="1" step="0.01" value="1" oninput="updateVolume(this.value)" aria-label="Volume Slider">
        </div>

        <div class="stats-row">
            <div class="stat-card">
                <div class="stat-val" id="streak-val">1</div>
                <div class="stat-label" id="lbl-streak">Day Streak</div>
            </div>
            <div class="stat-card">
                <div class="stat-val" id="history-val">0</div>
                <div class="stat-label" id="lbl-cleans">Total Cleans</div>
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="panel-title"><span id="lbl-trans">Transmission</span> <span id="lbl-uplink">Uplink</span></div>
        <button class="btn-share" onclick="shareSite()" id="btn-share" aria-label="Share Site">
            <svg style="width:16px;height:16px;fill:currentColor;margin-right:5px;" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.66 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/></svg>
            <span id="lbl-btn-share">SEND TO A FRIEND</span>
        </button>

        <div style="text-align:center; color:#666; font-size:9px; margin-bottom:10px; text-transform:uppercase;" id="lbl-qr">Mobile Uplink Code</div>
        <div class="qr-wrapper">
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://waterinmyspeaker.com" alt="Scan to fix speaker">
        </div>

        <div class="footer-actions">
            <button class="btn-mini btn-green" onclick="window.open('https://buymeacoffee.com/donshehab')" aria-label="Buy Me A Coffee">
                <svg style="width:12px;height:12px;fill:currentColor" viewBox="0 0 24 24"><path d="M20 3H4v10c0 2.21 1.79 4 4 4h6c2.21 0 4-1.79 4-4v-3h2c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 5h-2V5h2v3zM4 19h16v2H4z"/></svg>
                <span id="lbl-coffee">Buy Me A Coffee</span>
            </button>
            <a href="https://tellmylocation.com" target="_blank" class="btn-mini btn-green" id="lbl-tool" aria-label="Check Other Tool">
                Check My Other Tool →
            </a>
        </div>

        <div class="privacy-footer-box">
            <h4>Don System | Privacy & Data Policy</h4>
            <p>Your hardware safety and data privacy are our primary mission. This tool runs entirely on your local device.</p>
            <ul>
                <li><span>WE DO NOT:</span> Collect your personal files, location, or microphone data.</li>
                <li><span>WE DO NOT:</span> Track your identity or store audio samples.</li>
                <li><span>WE DO:</span> Use local browser storage for your "Cleaning Streaks."</li>
                <li><span>WE DO:</span> Use privacy-first analytics to monitor system traffic.</li>
            </ul>
            <p style="font-size: 8px; opacity: 0.5;">* By using this tool, you acknowledge that while we use scientifically safe tones, we are not liable for existing hardware defects.</p>
        </div>
    </div>

    <div class="ad-slot">
        <span style="opacity: 0.5;">ADVERTISEMENT</span>
    </div>

    <div class="panel">
        <div class="panel-title"><span id="lbl-how-title">How It</span> <span id="lbl-how-works">Works</span></div>
        <div style="text-align: left;">
            <div style="margin-bottom: 10px;">
                <div style="color: var(--accent); font-weight: bold; font-size: 10px;">1. Your phone plays a high‑frequency sound</div>
                <div style="color: #888; font-size: 9px;">This special tone creates rapid vibrations inside your speaker.</div>
            </div>
            <div style="margin-bottom: 10px;">
                <div style="color: var(--accent); font-weight: bold; font-size: 10px;">2. The vibrations push out trapped water and dust</div>
                <div style="color: #888; font-size: 9px;">Moisture and debris get forced out through the speaker grill.</div>
            </div>
            <div style="margin-bottom: 10px;">
                <div style="color: var(--accent); font-weight: bold; font-size: 10px;">3. Your audio becomes clear again</div>
                <div style="color: #888; font-size: 9px;">Muffled, low, or crackling sound returns to normal within seconds.</div>
            </div>
            <div style="margin-bottom: 10px;">
                <div style="color: var(--accent); font-weight: bold; font-size: 10px;">4. Safe for all devices</div>
                <div style="color: #888; font-size: 9px;">Works on iPhone, Samsung, Pixel, and any phone with a built‑in speaker.</div>
            </div>
            <div>
                <div style="color: var(--accent); font-weight: bold; font-size: 10px;">5. No app needed — everything runs in your browser</div>
                <div style="color: #888; font-size: 9px;">Fast, free, and instantly accessible from any device.</div>
            </div>
        </div>
    </div>

    <div class="panel">
        <div class="panel-title"><span>System</span> <span>FAQ</span></div>
        <div class="faq-container">
            <details class="faq-item">
                <summary>Is this sound safe for my speakers?</summary>
                <p>Yes. We use specific sine waves (165Hz) designed to vibrate the speaker diaphragm without exceeding safe amplitude limits. It essentially "shakes" the water off without damaging hardware.</p>
            </details>
            <details class="faq-item">
                <summary>How long should I run the cleaning cycle?</summary>
                <p>We recommend running "Pro Mode" (Auto Cycle) 2-3 times. If water is still trapped, position your phone upright and run it for 5 minutes.</p>
            </details>
            <details class="faq-item">
                <summary>Does this work for iPhone and Android?</summary>
                <p>Absolutely. It works on any device with a speaker, including iPhone, Samsung Galaxy, Pixel, Xiaomi, and even smartwatches.</p>
            </details>
            <details class="faq-item">
                <summary>What should I do if the sound is still muffled?</summary>
                <p>Wait 10 minutes for evaporation, then try again. Gravity helps—keep the speaker facing down while the sound plays.</p>
            </details>
            <details class="faq-item">
                <summary>Why can't I hear anything?</summary>
                <p>Your volume might be too low, or water has temporarily shorted the connection. Turn volume to max and run the "165Hz" mode.</p>
            </details>
        </div>
    </div>

    <div class="panel">
        <div class="panel-title"><span>Topic</span> <span>Index</span></div>
        <div style="font-size: 9px; color: #555; text-align: center; line-height: 1.8;">
           water in my speaker • water in my phone speaker • water stuck in speaker • phone speaker water remover • remove water from speaker • eject water from speaker • speaker water eject • water eject sound • fix wet phone speaker • phone speaker sounds muffled
        </div>
   </div>

    <footer>
        <a href="privacy.html">Privacy</a> • <a href="terms.html">Terms</a> • <a href="contact.html">Contact</a>
        <span class="don-sig">© 2025 DON SYSTEMS</span>
    </footer>
</div>

<div id="cookie-banner">
    <span style="margin-right: 15px;" id="lbl-cookie">System uses cookies for telemetry.</span>
    <button onclick="acceptCookies()" style="background: var(--accent); color: white; border: none; padding: 5px 15px; border-radius: 2px; font-weight: bold; cursor:pointer;" id="btn-cookie">ACKNOWLEDGE</button>
</div>

<script>
    let ctx, osc, gainNode, interval;
    let tm1, tm2, tm3; 
    let isPlaying = false;
    let currentVol = 1;
    let isBoost = false;

    // --- LOG FUNCTION ---
    function postLog(msg) {
        const log = document.getElementById('system-log');
        if(log) log.innerHTML = `> ${msg}<br>` + log.innerHTML.split('<br>').slice(0, 2).join('<br>');
    }

    async function initAudio() {
        if (!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();
        if (ctx.state === 'suspended') await ctx.resume();
    }

    function stop() {
        if (osc) { try{osc.stop(); osc.disconnect();}catch(e){} osc = null; }
        if (interval) clearInterval(interval);
        
        clearTimeout(tm1); clearTimeout(tm2); clearTimeout(tm3);
        
        isPlaying = false;
        
        document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.btn-diag').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.btn-ops').forEach(b => b.classList.remove('active'));
        const btnDeep = document.getElementById('btn-deep');
        if(btnDeep) btnDeep.classList.remove('active');
        
        const r1 = document.getElementById('ring-load'); if(r1) r1.classList.remove('active');
        const r2 = document.getElementById('ring-db'); if(r2) r2.classList.remove('active');
        const r3 = document.getElementById('ring-hz'); if(r3) r3.classList.remove('active');
        
        const prog = document.getElementById('prog-cont'); if(prog) prog.classList.remove('active');
        const fill = document.getElementById('prog-fill'); if(fill) fill.style.width = "0%";
        
        resetGauges();
        bars.forEach(b => b.style.height = '2px');
        postLog("STOPPED. SYSTEM READY.");
    }

    function playTone(freq, type='sine', pan=0) {
        if (!ctx) initAudio();
        
        if (osc) { try{osc.stop(); osc.disconnect();}catch(e){} osc = null; }

        osc = ctx.createOscillator();
        gainNode = ctx.createGain();
        const panner = ctx.createStereoPanner ? ctx.createStereoPanner() : null;

        osc.type = isBoost ? 'square' : type;
        osc.frequency.value = freq;
        osc.connect(gainNode);
        if (panner) {
            panner.pan.value = pan;
            gainNode.connect(panner);
            panner.connect(ctx.destination);
        } else {
            gainNode.connect(ctx.destination);
        }

        gainNode.gain.setValueAtTime(0.01, ctx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(currentVol, ctx.currentTime + 0.1);
        osc.start();
        isPlaying = true;

        if ("vibrate" in navigator) navigator.vibrate([100, 50, 100]);
        
        postLog(`ACTIVE: ${freq}Hz (${type.toUpperCase()})`);
        visualizerLoop(freq);
    }

    // --- TRANSLATION ENGINE ---
    const translations = {
        en: {
            trust: "TRUSTED BY 10M+ DEVICES", tagline: "The #1 High-Frequency Water Ejector",
            ptest: "Speaker Test", piso: "Isolation", pops: "Advanced Ops", pdeep: "Deep Clean",
            left: "LEFT", right: "RIGHT", bass: "BASS", treble: "TREBLE",
            pro: "PRO MODE", turbo: "TURBO MODE", auto: "AUTO CYCLE", boost: "BOOST",
            pdust: "Dust Integrity", pmeter: "Meter", contam: "Contamination Level", check: "CHECK LEVEL",
            gcpu: "CPU LOAD", gfreq: "FREQUENCY", ggain: "GAIN",
            mwater: "Water-Expulsion", mmode1: "Mode", mdust: "Dust-Shake", mmode2: "Mode",
            spec: "Live Spectrum Analysis", vol: "Volume Calibration",
            streak: "Day Streak", cleans: "Total Cleans",
            trans: "Transmission", uplink: "Uplink", share: "SEND TO A FRIEND", qr: "Mobile Uplink Code",
            coffee: "Buy Me A Coffee", tool: "Check My Other Tool →",
            brief: "Mission Briefing", intel: "Intel",
            whyT: "Why This Works", whyTx: "165Hz Ejection: Matches resonant frequency of mobile speakers to vibrate water out.",
            safeT: "Safe & Secure", safeTx: "Hardware-safe process. No overdrive volume used.",
            sys: "System Integrity", ver: "Verified",
            t1: "Safe for all Devices", t2: "No Data Collected", t3: "No App Required",
            t4: "Scientific Tones", t5: "Used by 10M+", t6: "Tech Recommended",
            cookie: "System uses cookies for telemetry.", ack: "ACKNOWLEDGE"
        },
        ar: {
            trust: "موثوق به في 10 ملايين جهاز", tagline: "#1 أداة إخراج المياه عالية التردد",
            ptest: "اختبار السماعة", piso: "عزل", pops: "عمليات متقدمة", pdeep: "تنظيف عميق",
            left: "يسار", right: "يمين", bass: "بيس", treble: "تريبل",
            pro: "وضع المحترفين", turbo: "وضع التيربو", auto: "دورة تلقائية", boost: "تعزيز",
            pdust: "سلامة الغبار", pmeter: "مقياس", contam: "مستوى التلوث", check: "فحص المستوى",
            gcpu: "أداء المعالج", gfreq: "التردد", ggain: "الكسب",
            mwater: "طرد المياه", mmode1: "وضع", mdust: "رج الغبار", mmode2: "وضع",
            spec: "تحليل الطيف المباشر", vol: "معايرة الصوت",
            streak: "أيام متتالية", cleans: "إجمالي التنظيف",
            trans: "الإرسال", uplink: "رابط", share: "أرسل لصديق", qr: "رابط الموبايل",
            coffee: "اشتر لي قهوة", tool: "تفقد أداتي الأخرى →",
            brief: "ملخص المهمة", intel: "معلومات",
            whyT: "لماذا يعمل هذا", whyTx: "165 هرتز: يطابق التردد الرنيني للسماعات لطرد الماء.",
            safeT: "آمن ومحمي", safeTx: "عملية آمنة للأجهزة. لا نستخدم صوت زائد.",
            sys: "سلامة النظام", ver: "تم التحقق",
            t1: "آمن لجميع الأجهزة", t2: "لا يتم جمع بيانات", t3: "لا يحتاج تطبيق",
            t4: "نغمات علمية", t5: "يستخدمه 10 ملايين+", t6: "ينصح به التقنيون",
            cookie: "النظام يستخدم ملفات تعريف الارتباط.", ack: "موافق"
        },
        ru: {
            trust: "ДОВЕРЯЮТ 10М+ УСТРОЙСТВ", tagline: "Инструмент №1 для удаления воды",
            ptest: "Тест Динамика", piso: "Изоляция", pops: "Спец. Опции", pdeep: "Глубокая Чистка",
            left: "ЛЕВЫЙ", right: "ПРАВЫЙ", bass: "БАС", treble: "ВЧ",
            pro: "PRO РЕЖИМ", turbo: "ТУРБО", auto: "АВТО ЦИКЛ", boost: "БУСТ",
            pdust: "Уровень Пыли", pmeter: "Метр", contam: "Уровень Загрязнения", check: "ПРОВЕРИТЬ",
            gcpu: "CPU", gfreq: "ЧАСТОТА", ggain: "УСИЛЕНИЕ",
            mwater: "Удаление Воды", mmode1: "Режим", mdust: "Тряска Пыли", mmode2: "Режим",
            spec: "Спектральный Анализ", vol: "Калибровка Громкости",
            streak: "Серия Дней", cleans: "Всего Чисток",
            trans: "Передача", uplink: "Связь", share: "ОТПРАВИТЬ ДРУГУ", qr: "Код для Мобильного",
            coffee: "Купить мне кофе", tool: "Мой другой инструмент →",
            brief: "Брифинг", intel: "Инфо",
            whyT: "Как это работает", whyTx: "165Гц: Резонирует с камерой динамика, выталкивая воду.",
            safeT: "Безопасно", safeTx: "Безопасно для железа. Без перегрузок.",
            sys: "Целостность", ver: "Подтверждено",
            t1: "Безопасно для всех", t2: "Без сбора данных", t3: "Без приложений",
            t4: "Научные тона", t5: "10М+ Польз.", t6: "Рекомендовано",
            cookie: "Система использует cookies.", ack: "ПРИНЯТЬ"
        },
        es: {
            trust: "USADO EN 10M+ DISPOSITIVOS", tagline: "El eyector de agua #1 de alta frecuencia",
            ptest: "Prueba de Altavoz", piso: "Aislamiento", pops: "Ops Avanzadas", pdeep: "Limpieza Profunda",
            left: "IZQ", right: "DER", bass: "BAJOS", treble: "AGUDOS",
            pro: "MODO PRO", turbo: "MODO TURBO", auto: "CICLO AUTO", boost: "BOOST",
            pdust: "Integridad Polvo", pmeter: "Medidor", contam: "Nivel Contaminación", check: "VERIFICAR",
            gcpu: "CARGA CPU", gfreq: "FRECUENCIA", ggain: "GANANCIA",
            mwater: "Expulsión Agua", mmode1: "Modo", mdust: "Sacudir Polvo", mmode2: "Modo",
            spec: "Análisis Espectral", vol: "Calibración Volumen",
            streak: "Racha Días", cleans: "Limpiezas Totales",
            trans: "Transmisión", uplink: "Enlace", share: "ENVIAR A UN AMIGO", qr: "Código Móvil",
            coffee: "Cómprame un café", tool: "Ver mi otra herramienta →",
            brief: "Informe Misión", intel: "Intel",
            whyT: "Por qué funciona", whyTx: "165Hz: Iguala la resonancia del altavoz para expulsar agua.",
            safeT: "Seguro y Protegido", safeTx: "Proceso seguro. No usamos volumen excesivo.",
            sys: "Integridad Sistema", ver: "Verificado",
            t1: "Seguro para todos", t2: "Sin recolección de datos", t3: "Sin App",
            t4: "Tonos Científicos", t5: "Usado por 10M+", t6: "Recomendado",
            cookie: "El sistema usa cookies.", ack: "ACEPTAR"
        },
        fr: {
            trust: "APPROUVÉ PAR 10M+ D'APPAREILS", tagline: "L'éjecteur d'eau haute fréquence n°1",
            ptest: "Test Haut-parleur", piso: "Isolation", pops: "Ops Avancées", pdeep: "Nettoyage Profond",
            left: "GAUCHE", right: "DROITE", bass: "BASSES", treble: "AIGUS",
            pro: "MODE PRO", turbo: "MODE TURBO", auto: "CYCLE AUTO", boost: "BOOST",
            pdust: "Intégrité Poussière", pmeter: "Compteur", contam: "Niveau Contamination", check: "VÉRIFIER",
            gcpu: "CHARGE CPU", gfreq: "FRÉQUENCE", ggain: "GAIN",
            mwater: "Expulsion Eau", mmode1: "Mode", mdust: "Secouer Poussière", mmode2: "Mode",
            spec: "Analyse Spectrale", vol: "Calibrage Volume",
            streak: "Série Jours", cleans: "Nettoyages Totaux",
            trans: "Transmission", uplink: "Liaison", share: "ENVOYER À UN AMI", qr: "Code Mobile",
            coffee: "M'offrir un café", tool: "Voir mon autre outil →",
            brief: "Briefing Mission", intel: "Info",
            whyT: "Pourquoi ça marche", whyTx: "165Hz : Correspond à la résonance pour expulser l'eau.",
            safeT: "Sûr et Sécurisé", safeTx: "Processus sûr. Pas de surcharge de volume.",
            sys: "Intégrité Système", ver: "Vérifié",
            t1: "Sûr pour tout appareil", t2: "Aucune donnée collectée", t3: "Pas d'app requise",
            t4: "Tons Scientifiques", t5: "Utilisé par 10M+", t6: "Recommandé par techniciens",
            cookie: "Le système utilise des cookies.", ack: "ACCEPTER"
        },
        cn: {
            trust: "超过1000万设备信赖", tagline: "排名第一的高频排水工具",
            ptest: "扬声器测试", piso: "隔离", pops: "高级操作", pdeep: "深度清洁",
            left: "左声道", right: "右声道", bass: "低音", treble: "高音",
            pro: "专业模式", turbo: "极速模式", auto: "自动循环", boost: "增强",
            pdust: "灰尘检测", pmeter: "仪表", contam: "污染程度", check: "检查水平",
            gcpu: "CPU负载", gfreq: "频率", ggain: "增益",
            mwater: "排水模式", mmode1: "模式", mdust: "除尘震动", mmode2: "模式",
            spec: "实时频谱分析", vol: "音量校准",
            streak: "连续天数", cleans: "清洁总数",
            trans: "传输", uplink: "上行链路", share: "发送给朋友", qr: "移动端代码",
            coffee: "请我喝咖啡", tool: "查看我的其他工具 →",
            brief: "任务简报", intel: "情报",
            whyT: "工作原理", whyTx: "165Hz：匹配扬声器共振频率以排出水分。",
            safeT: "安全保障", safeTx: "硬件安全。不使用过载音量。",
            sys: "系统完整性", ver: "已验证",
            t1: "适用于所有设备", t2: "不收集数据", t3: "无需App",
            t4: "科学音调", t5: "1000万+用户", t6: "技术人员推荐",
            cookie: "系统使用Cookies进行遥测。", ack: "确认"
        }
    };

    function changeLang(lang) {
        try { localStorage.setItem('lang', lang); } catch(e){}
        if (lang === 'ar') {
            document.body.style.direction = "rtl";
            document.querySelector('.lang-box').style.left = "0";
            document.querySelector('.lang-box').style.right = "auto";
        } else {
            document.body.style.direction = "ltr";
            document.querySelector('.lang-box').style.right = "0";
            document.querySelector('.lang-box').style.left = "auto";
        }
        const t = translations[lang];
        if(!t) return;
        
        // Safe binding to avoid crash if ID missing
        const setTxt = (id, txt) => { const el = document.getElementById(id); if(el) el.innerText = txt; };
        
        setTxt('lbl-trust', t.trust);
        setTxt('lbl-tagline', t.tagline);
        setTxt('lbl-panel-test', t.ptest);
        setTxt('lbl-panel-iso', t.piso);
        setTxt('btn-left', t.left);
        setTxt('btn-right', t.right);
        setTxt('btn-bass', t.bass);
        setTxt('btn-treble', t.treble);
        setTxt('lbl-panel-ops', t.pops);
        setTxt('lbl-panel-deep', t.pdeep);
        setTxt('lbl-pro', t.pro);
        setTxt('lbl-auto', t.auto);
        setTxt('lbl-turbo', t.turbo);
        setTxt('lbl-boost', t.boost);
        setTxt('lbl-panel-dust', t.pdust);
        setTxt('lbl-panel-meter', t.pmeter);
        setTxt('lbl-contam', t.contam);
        setTxt('btn-check', t.check);
        setTxt('lbl-gauge-cpu', t.gcpu);
        setTxt('lbl-gauge-freq', t.gfreq);
        setTxt('lbl-gauge-gain', t.ggain);
        setTxt('lbl-mode-water', t.mwater);
        setTxt('lbl-mode-mode1', t.mmode1);
        setTxt('lbl-mode-dust', t.mdust);
        setTxt('lbl-mode-mode2', t.mmode2);
        setTxt('lbl-spec', t.spec);
        setTxt('lbl-vol', t.vol);
        setTxt('lbl-streak', t.streak);
        setTxt('lbl-cleans', t.cleans);
        setTxt('lbl-trans', t.trans);
        setTxt('lbl-uplink', t.uplink);
        setTxt('lbl-btn-share', t.share);
        setTxt('lbl-qr', t.qr);
        setTxt('lbl-coffee', t.coffee);
        setTxt('lbl-tool', t.tool);
        setTxt('lbl-brief', t.brief);
        setTxt('lbl-intel', t.intel);
        setTxt('lbl-why-title', t.whyT);
        setTxt('lbl-safe-title', t.safeT);
        setTxt('lbl-safe-text', t.safeTx);
        setTxt('lbl-sys', t.sys);
        setTxt('lbl-ver', t.ver);
        setTxt('t1', t.t1);
        setTxt('t2', t.t2);
        setTxt('t3', t.t3);
        setTxt('t4', t.t4);
        setTxt('t5', t.t5);
        setTxt('t6', t.t6);
        setTxt('lbl-cookie', t.cookie);
        setTxt('btn-cookie', t.ack);
        
        const whyTxt = document.getElementById('lbl-why-text');
        if(whyTxt) whyTxt.innerHTML = `<strong>${t.whyT}:</strong> ${t.whyTx}`;
    }

    let savedLang = 'en';
    try { savedLang = localStorage.getItem('lang') || 'en'; } catch(e){}
    document.querySelector('.lang-select').value = savedLang;
    changeLang(savedLang);

    function shareSite() {
        const shareData = {
            title: 'Fix My Speaker',
            text: 'Fix your speaker in 30 seconds.',
            url: 'https://waterinmyspeaker.com'
        };

        if (navigator.share) {
            navigator.share(shareData).catch(console.error);
        } else {
            // Fallback for Desktop
            navigator.clipboard.writeText("Fix your speaker in 30 seconds: https://waterinmyspeaker.com");
            const toast = document.getElementById('copy-toast');
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }
    }

    // --- INIT ---
    const vizContainer = document.getElementById('viz-container');
    const bars = [];
    for(let i=0; i<20; i++) {
        const bar = document.createElement('div');
        bar.className = 'viz-bar';
        vizContainer.appendChild(bar);
        bars.push(bar);
    }

    // --- COOKIE & STATS ---
    try {
        if (!localStorage.getItem('cookiesAccepted')) document.getElementById('cookie-banner').style.display = 'block';
    } catch(e) {}
    
    function acceptCookies() { try{ localStorage.setItem('cookiesAccepted', 'true'); }catch(e){} document.getElementById('cookie-banner').style.display = 'none'; }

    let streak = 1; 
    try { streak = parseInt(localStorage.getItem('cleanStreak') || 1); } catch(e){}
    let cleans = 0; 
    try { cleans = parseInt(localStorage.getItem('totalCleans') || 0); } catch(e){}
    
    const today = new Date().toDateString();
    try {
        const lastVisit = localStorage.getItem('lastVisit');
        if (lastVisit !== today) {
            if (lastVisit) streak++;
            localStorage.setItem('cleanStreak', streak);
            localStorage.setItem('lastVisit', today);
        }
    } catch(e){}
    
    document.getElementById('streak-val').innerText = streak;
    document.getElementById('history-val').innerText = cleans;

    function incrementClean() {
        cleans++;
        try { localStorage.setItem('totalCleans', cleans); } catch(e){}
        document.getElementById('history-val').innerText = cleans;
    }

    // --- TYPING HEADER ---
    const typeText = document.getElementById('type-text');
    const phrases = ["System Ready.", "Select Sequence.", "Hardware Detected."];
    let pIdx = 0;
    function typeWriter(text, i, cb) {
        if (i < text.length) {
            typeText.innerHTML = text.substring(0, i+1);
            setTimeout(() => typeWriter(text, i+1, cb), 40);
        } else setTimeout(cb, 2000);
    }
    function loopType() {
        typeWriter(phrases[pIdx], 0, () => {
            pIdx = (pIdx + 1) % phrases.length;
            loopType();
        });
    }
    loopType();

    function updateVolume(val) {
        currentVol = val;
        if(gainNode) gainNode.gain.setTargetAtTime(val, ctx.currentTime, 0.1);
        updateGauges(0, val, true);
    }

    function toggleBoost() {
        isBoost = !isBoost;
        const btn = document.getElementById('btn-boost');
        if (isBoost) {
            btn.classList.add('active');
            updateVolume(1); // Force Max
            document.getElementById('vol-slider').value = 1;
            postLog("TURBO MODE: OVERDRIVE ENABLED");
        } else {
            btn.classList.remove('active');
            postLog("TURBO MODE: DISENGAGED");
        }
    }

    // --- DEEP CLEAN (AUTO) ---
    async function runDeepClean() {
        await initAudio();
        stop();
        isPlaying = true;
        incrementClean();
        document.getElementById('btn-deep').classList.add('active');
        postLog("INITIALIZING AUTO-CYCLE...");
        
        const runSeq = async () => {
             startProgress(15000); 
             playTone(165, 'sawtooth'); 
             tm1 = setTimeout(() => { if(isPlaying) playTone(60, 'square'); }, 5000); 
             tm2 = setTimeout(() => { 
                 if(isPlaying) {
                     playTone(1000, 'sine');
                     interval = setInterval(() => { if(osc) osc.frequency.setValueAtTime(1000 + Math.random()*5000, ctx.currentTime); }, 100);
                 }
             }, 10000);
             tm3 = setTimeout(() => { stop(); }, 15000); 
        };
        runSeq();
    }

    function startProgress(duration) {
        const bar = document.getElementById('prog-fill');
        const cont = document.getElementById('prog-cont');
        cont.classList.add('active');
        bar.style.transition = `width ${duration}ms linear`;
        setTimeout(() => bar.style.width = "100%", 10);
    }

    // --- DIAGNOSTICS ---
    async function runDiagnostic(type) {
        await initAudio();
        stop();
        isPlaying = true;
        
        const btns = document.querySelectorAll('.btn-diag');
        if(type==='left') btns[0].classList.add('active');
        if(type==='right') btns[1].classList.add('active');
        if(type==='bass') btns[2].classList.add('active');
        if(type==='treble') btns[3].classList.add('active');

        // REPAIR: Immediate Vibration for Haptic Feedback
        if ("vibrate" in navigator) navigator.vibrate(20);

        if (type === 'left') playTone(440, 'sine', -1);
        if (type === 'right') playTone(440, 'sine', 1);
        if (type === 'bass') playTone(60, 'sine');
        if (type === 'treble') playTone(12000, 'sine');
    }

    // --- SCANNERS ---
    function runScanner(type) {
        const box = document.getElementById(type + '-box');
        const bar = document.getElementById(type + '-bar');
        const val = document.getElementById(type + '-val');
        
        box.classList.add('scanning');
        val.innerText = "Scanning...";
        bar.style.width = "0%";
        postLog("SCANNING FOR PARTICLES...");
        
        setTimeout(() => {
            const result = Math.floor(Math.random() * 40) + 10;
            bar.style.width = result + "%";
            val.innerText = result + "% DETECTED";
            box.classList.remove('scanning');
            postLog(`SCAN COMPLETE: ${result}% CONTAM.`);
            if(type === 'dust') setTimeout(() => { val.innerText = "REC: RUN CLEANING"; }, 1000);
        }, 2000);
    }

    // --- GAUGE LOGIC ---
    function visualizerLoop(baseFreq) {
        if (!isPlaying) return;
        let dispFreq = baseFreq + (Math.random() * 5);
        let load = 40 + Math.random() * 30;
        updateGauges(dispFreq, currentVol, false, load);
        
        bars.forEach(b => {
            const h = Math.random() * 20 + 2;
            b.style.height = h + 'px';
        });

        setTimeout(() => visualizerLoop(baseFreq), 50);
    }

    // NEW GAUGE MATH: -120 to +120
    function updateGauges(hz, vol, volOnly=false, load=0) {
        const range = 240; // Total range (120 + 120)
        const start = -120;

        // Gain
        const vRot = start + (vol * range);
        const ndb = document.getElementById('needle-db'); if(ndb) ndb.style.transform = `rotate(${vRot}deg)`;
        const vdb = document.getElementById('val-db'); if(vdb) vdb.innerText = Math.round(vol * 10);
        if (volOnly && !isPlaying) return;

        // Hz (20k max)
        let hRot = start + (Math.min(hz, 20000) / 20000 * range);
        if (hz === 0) hRot = start;
        const nhz = document.getElementById('needle-hz'); if(nhz) nhz.style.transform = `rotate(${hRot}deg)`;
        const vhz = document.getElementById('val-hz'); if(vhz && hz > 0) vhz.innerText = Math.round(hz) + " Hz";

        // Load
        if (isPlaying) {
            const lRot = start + (load / 100 * range);
            const nl = document.getElementById('needle-load'); if(nl) nl.style.transform = `rotate(${lRot}deg)`;
            const vl = document.getElementById('val-load'); if(vl) vl.innerText = Math.round(load) + "%";
        }
    }

    function resetGauges() {
        // FORCE RESET TO -120deg
        const start = -120;
        const nhz = document.getElementById('needle-hz'); if(nhz) nhz.style.transform = `rotate(${start}deg)`;
        const vhz = document.getElementById('val-hz'); if(vhz) vhz.innerText = "0 Hz";
        const nl = document.getElementById('needle-load'); if(nl) nl.style.transform = `rotate(${start}deg)`;
        const vl = document.getElementById('val-load'); if(vl) vl.innerText = "0%";
        updateGauges(0, currentVol, true);
    }

    // Init on Load
    window.onload = function() {
        resetGauges();
        // Trigger default lang
        let savedLang = 'en';
        try { savedLang = localStorage.getItem('lang') || 'en'; } catch(e){}
        changeLang(savedLang);
    };

    // --- MODES ---
    async function setMode(type, id) {
        await initAudio();
        stop();
        isPlaying = true;
        incrementClean();
        
        const btnIndex = (type === 'water' ? 0 : 5) + (id - 1);
        document.querySelectorAll('.mode-btn')[btnIndex].classList.add('active');

        // Progress Bar
        startProgress(10000); // 10s generic for manual modes

        // REPAIR: Immediate Vibration for Haptic Feedback
        if ("vibrate" in navigator) navigator.vibrate(20);

        if (type === 'water') {
            const freqs = [165, 200, 285, 350, 440];
            const waves = ['sawtooth', 'square', 'sine', 'sawtooth', 'sine'];
            playTone(freqs[id-1], waves[id-1]);
        } else {
            const freqs = [60, 120, 500, 800, 1000];
            const waves = ['square', 'sawtooth', 'square', 'sawtooth', 'sine'];
            playTone(freqs[id-1], waves[id-1]);
        }
    }

    // --- ADDED FOR V18 MASTER GOLD: UNIVERSAL & DYNAMIC LOGIC ---
    document.addEventListener('DOMContentLoaded', () => {
        // 1. SMART DEVICE DETECTION (EXPANDED LIST)
        const ua = navigator.userAgent;
        let device = "Audio Hardware";
        
        if (/iPhone/i.test(ua)) device = "Apple iPhone";
        else if (/iPad/i.test(ua)) device = "Apple iPad";
        else if (/Samsung|SM-|Galaxy/i.test(ua)) device = "Samsung Galaxy Architecture";
        else if (/Pixel/i.test(ua)) device = "Google Pixel Audio";
        else if (/Redmi|Xiaomi/i.test(ua)) device = "Xiaomi Audio Core";
        else if (/OPPO/i.test(ua)) device = "Oppo Sound Engine";
        else if (/Huawei|Honor/i.test(ua)) device = "Huawei Acoustic System";
        else if (/Android/i.test(ua)) device = "Android System";
        else if (/Windows/i.test(ua)) device = "Windows Terminal";
        else if (/Mac/i.test(ua)) device = "Macintosh Core";

        const bar = document.getElementById('device-name');
        if (bar) {
            setTimeout(() => { bar.innerText = "DETECTED: " + device; }, 1500);
            setTimeout(() => { 
                bar.innerText = device + " OPTIMIZED"; 
                bar.parentElement.style.borderColor = "var(--accent)"; 
                bar.parentElement.style.color = "var(--accent)"; 
                bar.parentElement.style.background = "rgba(255, 0, 60, 0.1)"; 
            }, 3500);
        }

        // 2. DYNAMIC TITLE REWRITING (FOR SEO STRATEGY)
        const urlParams = new URLSearchParams(window.location.search);
        const deviceParam = urlParams.get('device');
        if(deviceParam) {
            const cleanName = deviceParam.replace(/-/g, ' ');
            document.title = `${cleanName} Speaker Cleaner | Fix Water Damage`;
        }
    });
</script>
    <script data-collect-dnt="true" async src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
<noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif?collect-dnt=true" alt="" referrerpolicy="no-referrer-when-downgrade"/></noscript>
</body>
</html>
